<!DOCTYPE html>
<html lang="en">

<head>
    <!--Title-->
    <title>Dailogwave - All Campaign</title>

    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="DexignZone">
    <meta name="robots" content="index, follow">

    <!-- MOBILE SPECIFIC -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="static/assets/images/favicon.png">
    <!-- Datatable -->
    <link href="static/assets/vendor/datatables/css/jquery.dataTables.min.css" rel="stylesheet">
    <!-- Custom Stylesheet -->
    <link href="static/assets/vendor/datatables/responsive/responsive.css" rel="stylesheet">
    <link href="static/assets/vendor/bootstrap-select/dist/css/bootstrap-select.min.css" rel="stylesheet">
    <link class="main-css" href="static/assets/css/style.css" rel="stylesheet">
    <style>
        @media screen and (max-width:1024px) {
            .brand-logo {
                padding: 10px 20px !important;
            }

            .brand-logo img {
                height: 60px !important;
                margin-top: 50px !important;
            }
        }

        @media screen and (max-width:768px) {
            .brand-logo {
                padding: 10px 20px !important;
            }

            .brand-logo img {
                height: 50px !important;
                margin-top: 0px !important;
            }

            .activedata {
                color: #fff !important;
            }
        }
    </style>
</head>

<body>

    <!--*******************
        Preloader start
    ********************-->
    <div id="preloader">
        <div class="sk-three-bounce">
            <div class="sk-child sk-bounce1"></div>
            <div class="sk-child sk-bounce2"></div>
            <div class="sk-child sk-bounce3"></div>
        </div>
    </div>
    <!--*******************
        Preloader end
    ********************-->


    <!--**********************************
        Main wrapper start
    ***********************************-->
    <div id="main-wrapper">

        <!--**********************************
            Nav header start
        ***********************************-->
        <div class="nav-header">
            <a href="/dashboard" class="brand-logo" style="padding: 50px 20px;">
                <img class="new" style="height: 200px; margin-top: 30px;" src="static/logo_white.png" alt="">
            </a>

            <div class="nav-control">
                <div class="hamburger">
                    <span class="line"></span><span class="line"></span><span class="line"></span>
                </div>
            </div>
        </div>
        <!--**********************************
            Nav header end
        ***********************************-->

        <!--**********************************
            Header start
        ***********************************-->
        <div class="header">
            <div class="header-content">
                <nav class="navbar navbar-expand">
                    <div class="collapse navbar-collapse justify-content-between">
                        <div class="header-left">
                            <li class="nav-item dropdown notification_dropdown">
                                <p class="btn btn-warning" style="margin: 0; margin-right: 20px;">Credits:
                                    <b>{{points}}</b>
                                </p>
                            </li>
                        </div>
                        <ul class="navbar-nav header-right">
                            <li class="nav-item dropdown notification_dropdown">
                                <a class="nav-link bell dz-theme-mode" href="javascript:void(0);">
                                    <i id="icon-light" class="fas fa-sun"></i>
                                    <i id="icon-dark" class="fas fa-moon"></i>

                                </a>
                            </li>
                            <li class="nav-item dropdown header-profile">
                                <a class="nav-link" role="button" data-bs-toggle="dropdown">
                                    <div class="header-info">
                                        <span class="text-black">Hello, <strong>{{username}}</strong></span>
                                        <p class="fs-12 mb-0">User</p>
                                    </div>
                                    {% if company_logo %}
                                    <img src="{{company_logo}}" width="20" alt="">
                                    {% else %}
                                    <p
                                        style="padding: 10px 20px; background-color: #2BC155; border-radius: 50%; margin: 10px 0px; color: #fff; font-weight: 600; ">
                                        {{username[0].title()}}</p>
                                    {% endif %}
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <a href="/logout" class="dropdown-item ai-icon">
                                        <svg id="icon-logout" xmlns="http://www.w3.org/2000/svg" class="text-danger"
                                            width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                            <polyline points="16 17 21 12 16 7"></polyline>
                                            <line x1="21" y1="12" x2="9" y2="12"></line>
                                        </svg>
                                        <span class="ms-2">Logout </span>
                                    </a>
                                    <a href="/user_update_password" class="dropdown-item ai-icon">
                                        <i class="fas fa-edit" style="color: red;"></i>
                                        <span class="ms-2">Update Password </span>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <!--**********************************
            Header end ti-comment-alt
        ***********************************-->

        <!--**********************************
            Sidebar start
        ***********************************-->
        <div class="deznav">
            <div class="deznav-scroll">
                <ul class="metismenu" id="menu">
                    <li>
                        <a class="ai-icon" href="/dashboard">
                            <i class="flaticon-381-networking"></i>
                            <span class="nav-text">Dashboard</span>
                        </a>
                    </li>
                    <li><a class="ai-icon" href="/user_data">
                            <i class="fas fa-user"></i>
                            <span class="nav-text">User Data</span>
                        </a>
                    </li>
                    <li><a class="ai-icon" href="/campaign_details">
                            <i class="fas fa-tasks" style="background-color: #1EAAE7; color: #fff;"></i>
                            <span class="nav-text activedata" style="color: #1EAAE7;">Campaign Details</span>
                        </a>
                    </li>
                    <!-- <li><a class="ai-icon" href="/bulk_calling">
							<i class="fas fa-phone"></i>
							<span class="nav-text">Bulk Auto Calls</span>
						</a>
					</li> -->
                    <li><a class="ai-icon" href="/text_to_speech">
                            <i class="fas fa-file-audio"></i>
                            <span class="nav-text">Smart Audios</span>
                        </a>
                    </li>
                    <li><a class="ai-icon" href="/upload_audio">
                            <i class="fas fa-file-audio"></i>
                            <span class="nav-text">Upload Audio</span>
                        </a>
                    </li>
                    <li><a class="ai-icon" href="/user_points">
                            <i class="fas fa-hand-point-up"></i>
                            <span class="nav-text">Points History</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!--**********************************
            Sidebar end
        ***********************************-->

        <!--**********************************
            Content body start
        ***********************************-->
        <div class="content-body default-height">
            <div class="container-fluid">
                <div style="margin-bottom: 30px;">
                    <marquee style="padding: 0; margin: 0;">
                        <p style="color: red; padding: 13px 0 0px 0;">Please Note: Download report after your compaign
                            is successfully completed...</p>
                    </marquee>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">

                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="col-md-auto" id="remove_tag" style="margin: 10px">
                                        {% with messages = get_flashed_messages(with_categories=true)
                                        %} {% if messages %} {% for category, message in messages %}
                                        <div class="alert alert-{{category}} alert-dismissable" role="alert"
                                            id="inside_alert">
                                            {{message}}
                                        </div>
                                        {% endfor %} {% endif %} {% endwith %}
                                    </div>
                                </div>
                            </div>
                            <div class="card-header" style="display: flex;">
                                <h4 class="card-title">All Compaign</h4>
                                <div class="button_group" style="display: flex;">
                                    <a class="btn btn-primary" style="margin-left: 10px;" href="/live_campaign_details"
                                        style="cursor: pointer;">Live campaign Logs</a>
                                    <a class="btn btn-primary" style="margin-left: 10px;" href="/campaign_details"
                                        style="cursor: pointer;">campaign Logs</a>
                                    <a class="btn btn-primary" style="margin-left: 10px;"
                                        style="cursor: pointer;">Smart campaign Logs</a>
                                </div>
                            </div>
                            <div class="card-body">
                                <table id="responsiveTable" class="display responsive nowrap w-100">
                                    <thead>
                                        <tr>
                                            <th>Compaign ID</th>
                                            <th>Compaign Name</th>
                                            <th>Total Calls</th>
                                            <th>Total Answered</th>
                                            <th>Total Busy</th>
                                            <th>Detailed Report</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for var in all_user_id_data %}
                                        <tr>
                                            <td>{{var["campaign_id"]}}</td>
                                            <td>{{var["campaign_name"]}}</td>
                                            <td>{{var["total_calls"]}}</td>
                                            <td>{{var["total_answered"]}}</td>
                                            <td>{{var["total_busy"]}}</td>
                                            <td>
                                                <a class="btn btn-primary" onclick="getreport('{{var['campaign_id']}}')"
                                                    style="cursor: pointer;">Download</a>
                                                <!-- <div class="basic-dropdown">
                                                    <div class="dropdown">
                                                        <button type="button" class="btn btn-primary dropdown-toggle"
                                                            data-bs-toggle="dropdown">
                                                            Export Data
                                                        </button>
                                                        <div class="dropdown-menu">
                                                            <a class="dropdown-item" style="cursor: pointer;" href="/export_data?campaign_id={{var['campaign_id']}}">Csv</a>
                                                            <a class="dropdown-item" style="cursor: pointer;" href="/export_data?campaign_id={{var['campaign_id']}}">Excel</a>
                                                        </div>
                                                    </div>
                                                </div> -->
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--**********************************
            Content body end
        ***********************************-->

        <!--**********************************
           Support ticket button start
        ***********************************-->

        <!--**********************************
           Support ticket button end
        ***********************************-->


    </div>
    <!--**********************************
        Main wrapper end
    ***********************************-->

    <!--**********************************
        Scripts
    ***********************************-->
    <!-- Required vendors -->
    <script src="static/assets/vendor/global/global.min.js"></script>
    <script src="static/assets/vendor/datatables/js/jquery.dataTables.min.js"></script>
    <script src="static/assets/vendor/datatables/responsive/responsive.js"></script>
    <script src="static/assets/js/plugins-init/datatables.init.js"></script>
    <script src="static/assets/vendor/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
    <script src="static/assets/js/custom.min.js"></script>
    <script src="static/assets/js/demo.js"></script>
    <!-- <script src="static/assets/js/styleSwitcher.js"></script> -->
    <script>
        function opencampaign(campaign_iddata) {
            console.log("compaign_id is ", campaign_iddata);
            window.location.href = `/campaign_info?campaign_id=${campaign_iddata}`
        }
        function exportdataplan(type, campaign_id) {
            console.log(type, campaign_id);
        }

        async function getreport(campaign_id) {
            // Define the API endpoint
            const apiUrl = `/export_data?type=live&campaign_id=${campaign_id}`;

            // Make a GET request
            const response = await fetch(apiUrl, {
                method: "GET",
                headers: {
                    "Content-Type": "application/json",
                },
            });

            if (!response.ok) {
                throw new Error("Failed to submit form");
            }
            try{
            const responseData = await response.json();
            console.log("API Response:", responseData);
            var report_url = responseData["report_url"];
            console.log(report_url);
            if (report_url == null) {
                window.location.reload();
            } else {
                window.location.href = report_url;
                console.log("download report");
            }} catch {
                window.location.reload();
            }


            // window.location.href = "/campaign_details"
        }
    </script>
</body>

<!-- Mirrored from mophy.dexignzone.com/xhtml/table-bootstrap-basic.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 Apr 2024 07:17:24 GMT -->

</html>